!function(){function corsReq(method,url){var xhr=new XMLHttpRequest;return"withCredentials"in xhr?xhr.open(method,url,!0):"undefined"!=typeof XDomainRequest?(xhr=new XDomainRequest,xhr.open(method,url)):xhr=null,xhr}function fetchNetworkDetails(fetchStreamIds,callback){var url=BASE_URL+"/data/v1/org/fe",req=corsReq("GET",url+"?"+getDefaultParams(fetchStreamIds));if(!req)return void callback("NO_CORS_ERROR");req.onload=function(){var responseText=req.responseText,json=JSON.parse(responseText);if(!json||!json.data)return void callback("INVALID_JSON");callback(null,json.data)},req.onerror=function(){callback("INVALID_RESPOSE")},req.send()}function OrgInfo(tracker,config,method){if(this._tracker=tracker,!config||!config.serviceProvider||!config.networkDomain)return void console.error("please set serviceProvider and networkDomain in config");this._serviceProvider=config.serviceProvider,this._networkDomain=config.networkDomain,this._method=method||"ga",this._isDebug=config.isDebug,this._streamIds=[]}function getCurrentUrl(){try{return window.location.href}catch(e){return null}}function getDefaultParams(fetchStreamIds){var enc=encodeURIComponent,rf=document.referrer||"",pt=document.title||"",dt=new Date,ct=dt.getTime(),tz=dt.getTimezoneOffset(),ret="rf="+enc(rf)+"&pt="+enc(pt)+"&ct="+enc(ct)+"&tz="+enc(tz)+"&tp=ga4";fetchStreamIds&&(ret+="&fsi=1");var cu=getCurrentUrl();return cu&&(ret=ret+"&cu="+encodeURIComponent(cu)),ret}function orgInfoGtagPlugin(config,i){i=i||0;var gtag=window.gtag;if(void 0!==gtag){new OrgInfo(gtag,config,"gtag").setNetworkValues()}else i<50&&setTimeout(function(){orgInfoGtagPlugin(config,i+1)},500*(i+1))}function delveAIOrgInfoInit(gtype,spDim,ndDim,reqFrom){switch(gtype){case"gtag":orgInfoGtagPlugin({serviceProvider:spDim,networkDomain:ndDim})}}var BASE_URL="//api.orginfo.io";OrgInfo.prototype.debugMessage=function(message){this._isDebug&&console&&console.debug(message)},OrgInfo.prototype._sendForAllStreamIds=function(obj,streamIds){this._tracker("set","user_properties",obj),this._tracker("event","orgInfo",{non_interaction:!0})},OrgInfo.prototype.sendGtagRequest=function(name,domain,streamIds){var obj={};obj[this._serviceProvider]=name,obj[this._networkDomain]=domain,this._sendForAllStreamIds(obj,streamIds)},OrgInfo.prototype.sendGtmRequest=function(name,domain){var obj={event:"orgInfoGA4"};obj[this._serviceProvider]=name,obj[this._networkDomain]=domain,window.dataLayer=window.dataLayer||[],window.dataLayer.push(obj)},OrgInfo.prototype.onNetworkLoad=function(err,values){err&&(console.error(err),values={});var name=values.name||"(not set)",domain=values.domain||"(not set)";"gtm"===this._method?this.sendGtmRequest(name,domain):"gtag"===this._method?this.sendGtagRequest(name,domain,values.streamIds):console.error("unsupported type")},OrgInfo.prototype.setNetworkValues=function(){var self=this;fetchNetworkDetails("gtag"===this._method,function(err,res){self.onNetworkLoad(err,res)})},function(){window.orgInfoGtmPluginGA4=window.orgInfoGtmPluginGA4||{};var args=window.orgInfoGtmPluginGA4.q||[];args.length>0&&args[0]&&args[0].length>=5&&"orgInfoGtmPluginGA4"===args[0][4]&&function(){new OrgInfo({},{serviceProvider:"OrgInfoServiceProviderGA4",networkDomain:"OrgInfoNetworkDomainGA4"},"gtm").setNetworkValues()}()}(),function(pluginName,pluginConstructor){var ga=window[window.GoogleAnalyticsObject||"ga"];"function"==typeof ga&&ga("provide",pluginName,pluginConstructor),window.delveAIOrgInfoGA4=window.delveAIOrgInfoGA4||delveAIOrgInfoInit;var q=window.delveAIOrgInfoGA4.q;q&&q.length>0&&q[0].length>=3&&delveAIOrgInfoInit(q[0][0],q[0][1],q[0][2],"internal")}("orgInfo",OrgInfo)}();